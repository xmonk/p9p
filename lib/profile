#!/usr/local/plan9/bin/rc

plan9=/usr/local/plan9
. $plan9/lib/acme.rc

path=($plan9/bin $home/bin $home/.p9p/bin $path)
editor=E

fn calendar {
	$plan9/bin/9 calendar
}

fn rc {
	$plan9/bin/9 rc
}

fn win {
	$plan9/bin/9 win rc -l
}

fn lnum { 
	awk '{print NR " " $0 }'
}

fn gl {
	grep -n $1 $*
}

fn gt {
	find . -name $1 | xargs grep -n $2
}

fn p9up {
	wd = `{pwd}
	cd $plan9
	hg pull -u
	cd $wd
	wd = ()
}

fn up_go {
	wd=`{pwd}
	cd $HOME/tools/go
	hg pull 
	hg update release
	cd $wd
	wd = ()
}

#fn start_plumber {
#	if(test -r $home/.p9p/.pid) p9pid = `{cat $home/.p9p/.pid}
#	if(~ $#p9pid 0){
#		 $plan9/bin/9 plumber
#		 p9pid = `{pgrep plumber}
#		 echo $p9pid > $home/.p9p/.pid
#		 p9pid = ()
#	}
#}

#fn stop_plumber {
#	if(test -r $home/.p9p.id) p9pid = `{cat $home/.p9p.pid}
#	if(~ $#p9pid 0){
#		tpid=`{pgrep plumber}
#		if(~ $#tpid 0) 
#		exit ''
#	}
#	kill -9 $p9pid
#	rm $home/.p9p.id
#	p9pid = ()
#	tpid = ()
#}
